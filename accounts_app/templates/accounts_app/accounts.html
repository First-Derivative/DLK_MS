{% load static %}

<!doctype html>
<html lang="en">
   <head>
     
   </head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <!-- Bootstrap CSS-->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
 
   <!-- Overview & Root CSS-->
   <link href="{% static '/overview_app/styles/root.css' %}" rel="stylesheet">
   <link href="{% static '/overview_app/styles/overview.css' %}" rel="stylesheet">
 
   <!-- Bootstrap JS-->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 
   <!-- Jquery JS-->
   <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
 

   <body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg d-flex justify-content-between" id="navbar_container"> 
    
    <a class="navbar-brand" href="{% url 'home'%}">DLK Master</br>Schedule</a>
    <button type="button" data-bs-toggle="collapse" data-bs-target="#navbar_nav" class="navbar-toggler">Nav</button>
    
    <div class="collapse navbar-collapse" id="navbar_nav">
        <div class="col-lg-10">
        <ul class="navbar-nav justify-content-center">
          <li class="nav-item {% if request.path == '/' %}active{% endif %}"><a class="" href="{% url 'home' %}">Overview</a></li>
          <li class="nav-item {% if request.path == '/sales/' %}active{% endif %}"><a class="" href="{% url 'sales' %}">Sales</li>
          <li class="nav-item {% if request.path == '/purchases/' %}active{% endif %}"><a class="" href="{% url 'purchases' %}"></a><a class="" href="{% url 'purchases' %}">Purchases</li>
          <li class="nav-item {% if request.path == '/shipping/' %}active{% endif %}"><a class="" href="{% url 'shipping' %}">Shipping</li>
          <li class="nav-item {% if request.path == '/operations/' %}active{% endif %}"><a class="" href="{% url 'operations'%}">Operations</li>
          <li class="nav-item dropdown {% if request.path == '/accounts/' %}active{% endif %}" id="accounts_tab">
            <a class="nav-link dropdown-toggle" id="accounts_tab_text" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Accounts
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
              <li><a class="dropdown-item" href="{% url 'accounts' %}">Receivables</a></li>
              <li><a class="dropdown-item" href="#">Payables</a></li>
            </ul>
          </li>
        </ul>
      </div>
      
      <div class="col-lg-2">
        <div class="nav_footer d-flex flex-row justify-content-center">
            <div class="col">
              <li id="profile_button"><a href="#"><img src="{% static '/overview_app/icons/profile_icon.png' %}" id="profile_icon" alt="Profile"></a></li>
            </div>
            <div class="col">
              <button type="button" class="btn btn-outline-danger" id="logout_button">logout</button>
            </div>
            <div class="col">
              <button type="button" class="btn btn-outline-warning"  data-bs-toggle="modal" data-bs-target="#reportModal" id="bug">report</button>
            </div>
        </div>
      </div>
    </div>
      
  </nav>

    <!-- COMBAT INFORMATION CENTER -->
    <div class="container-fluid mt-3" id="root_container">
      <div class="row d-flex justify-content-center ">
     
        <!-- LEFT_CONTENT -->
        <div class="col-xl-2" id="left_content">

          <!-- Search & Filtering -->
          <div class="d-flex flex-row ">
            <form class="search_wrapper mb-3" id="left_content_form">

              <div class="col mb-3">
                <input type="text" class="search_input form-control" value="Search Not Working in this build" placeholder="Search..." id="input-search">
                <p class="mt-1" style="font-size: 75%;margin-left: 0.25em" id="input-helper">press enter to start search</p>
              </div>

              <div>
                <button type="button" class="btn std-btn col mb-3" id="input-search-clear">
                  Clear Search Results
                </button>
              </div>

              <div class="col mb-3">
                <input class="form-check-input" type="checkbox" value="" id="input-cancelled">
                <label class="form-check-label" for="input-cancelled">
                  Show Cancelled Orders
                </label>
              </div>

              <div class="col">
                <input class="form-check-input" type="checkbox" value="" id="input-completed" checked>
                <label class="form-check-label" for="input-completed">
                  Show Completed Orders
                </label>
              </div>
            </form>
          </div>

        </div>

        <!-- MAIN CONTENT -->
        <div class="col-xl-10 overflow-auto" id="main_content" style="padding-right: 2rem;">
          <div class="h5 bg-warning p-3" id="loading_info"> Loading items from Database... </div>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Sale</th>
                <th scope="col">Sale Invoice </th>
                <th scope="col">Invoice Number</th>
                <th scope="col" style="min-width:8rem">Invoice Date</th>
                <th scope="col">Status</th>
                <th scope="col">Completed</th>
                <th scope="col">Cancelled</th>
              </tr>
            </thead>
            <!-- Accounts Display -->
            <tbody id="accounts_display">
            </tbody>
            </table>
        </div>
    </div>

  </body>
  
  <!-- Handler/Ajax Imports -->
  <script src="{% static 'overview_app/scripts/overview_handlers.js'%}"></script>
  <!-- <script src="{% static 'acccounts_app/scripts/acccounts_handlers.js'%}"></script> -->
  <script src="{% static 'overview_app/scripts/overview_ajax.js'%}"></script>
  <!-- <script src="{% static 'acccounts_app/scripts/acccounts_ajax.js'%}"></script> -->
  
  <script>
    
    // urls
    const accounts_url = "{% url 'accounts' %}" + "?search=0"
    const getAllSales_url = "{% url 'getAllPayments_API' %}"
    const postReport_url = "{% url 'postNewReport_API' %}"
    
    // icons
    true_icon_src = "{% static 'overview_app/icons/true.png' %}"
    false_icon_src = "{% static 'overview_app/icons/false.png' %}"

    // tokens
    let report_token = "{{csrf_token}} "
    let token = "{{csrf_token}} "


    $("#logout_button").click(function() {
      window.location.replace("{% url 'user_logout' %}"); 
    })

    $(document).ready(start(getAllRecords, "accounts", params=getAllSales_url))
   </script>
</html>